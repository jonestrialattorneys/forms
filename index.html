<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jones Trial Attorneys - Corporate Formation App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Chosen Palette: Serene Neutrals with Subtle Accents */
        :root {
            --primary-bg: #fdfaf6; /* Light Cream */
            --secondary-bg: #f0f0e8; /* Slightly darker cream/off-white */
            --text-color: #333333; /* Dark Grey */
            --border-color: #d1d5db; /* Light Grey */
            --accent-color: #8b5cf6; /* Purple for highlights/buttons */
            --accent-hover: #7c3aed; /* Darker Purple for hover */
            --progress-active: #8b5cf6;
            --progress-inactive: #e5e7eb;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
        }

        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .progress-dot {
            width: 12px;
            height: 12px;
            background-color: var(--progress-inactive);
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        .progress-dot.active {
            background-color: var(--progress-active);
        }
        .progress-dot.completed {
            background-color: var(--accent-color);
        }
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        textarea {
            border: 1px solid var(--border-color);
            background-color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            width: 100%;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }
        button {
            background-color: var(--accent-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        button:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }
        button:active {
            transform: translateY(0);
        }
        .btn-secondary {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        .btn-secondary:hover {
            background-color: #e0e0d8;
        }
        .owner-section {
            background-color: var(--secondary-bg);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }
        .summary-item {
            margin-bottom: 0.75rem;
        }
        .summary-item strong {
            display: block;
            margin-bottom: 0.25rem;
            color: #555;
        }
        .summary-item span {
            display: block;
            padding-left: 1rem;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <!-- Application Structure Plan: The application will be structured as a multi-step form, guiding the user through the questionnaire sections one by one. This approach was chosen to break down the potentially lengthy form into manageable chunks, reducing cognitive overload and improving the user experience. A progress indicator (dots) will visually represent the user's progress. Key interactions include "Next" and "Previous" buttons for navigation between sections, an "Add Another Owner" button for dynamic field addition, and a final "Submit" button. This linear flow ensures all necessary information is collected systematically. -->
    <!-- Visualization & Content Choices:
    * Client Contact, Proposed Company, EIN Specific, Additional Information:
        * Goal: Collect specific textual and categorical data.
        * Presentation Method: Standard HTML input fields (text, email, tel, textarea, radio buttons, date input).
        * Interaction: Direct user input, radio button selection, date picker.
        * Justification: These are the most direct and intuitive methods for collecting structured data.
        * Library/Method: Vanilla JS for form state management and input handling; Tailwind CSS for layout and styling.
    * Ownership Information:
        * Goal: Collect structured data for a variable number of owners.
        * Presentation Method: Dynamically added blocks of HTML input fields for each owner.
        * Interaction: "Add Another Owner" button to append new input blocks; "Remove" button for each owner block.
        * Justification: This dynamic approach prevents overwhelming the user with too many fields initially while accommodating multiple owners efficiently.
        * Library/Method: Vanilla JS for DOM manipulation (adding/removing sections); Tailwind CSS for layout and styling.
    * Summary/Review Page:
        * Goal: Allow users to review all entered data before final submission.
        * Presentation Method: Read-only display of all collected data, organized by section.
        * Interaction: "Edit" button to navigate back to a specific section for corrections; "Submit" button for final submission.
        * Justification: Enhances data accuracy and user confidence before submission.
        * Library/Method: Vanilla JS to populate the summary dynamically; Tailwind CSS for layout and styling.
    * No Chart.js or Plotly.js: The primary purpose of this application is *data collection* from the user, not the visualization of existing data. The source report is a questionnaire, not a data report. Therefore, charts and complex visualizations are not applicable to this specific application's function.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Jones Trial Attorneys - Corporate Formation App</h1>
        <p class="text-center text-gray-600 mb-8">Please complete this questionnaire to provide us with the necessary information to set up your company and obtain your Employer Identification Number (EIN) from the IRS.</p>

        <!-- Progress Indicator -->
        <div class="flex justify-center space-x-3 mb-8">
            <div class="progress-dot active" data-step="0"></div>
            <div class="progress-dot" data-step="1"></div>
            <div class="progress-dot" data-step="2"></div>
            <div class="progress-dot" data-step="3"></div>
            <div class="progress-dot" data-step="4"></div>
        </div>

        <form id="clientForm">
            <!-- Section 1: Client Contact Information -->
            <div class="form-section active" data-section="0">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Section 1: Client Contact Information</h2>
                <div class="mb-5">
                    <label for="clientName" class="block text-gray-700 text-sm font-medium mb-2">Your Full Name:</label>
                    <input type="text" id="clientName" name="clientName" class="focus:ring-2" required>
                </div>
                <div class="mb-5">
                    <label for="clientEmail" class="block text-gray-700 text-sm font-medium mb-2">Your Email Address:</label>
                    <input type="email" id="clientEmail" name="clientEmail" class="focus:ring-2" required>
                </div>
                <div class="mb-5">
                    <label for="clientPhone" class="block text-gray-700 text-sm font-medium mb-2">Your Phone Number:</label>
                    <input type="tel" id="clientPhone" name="clientPhone" class="focus:ring-2" required>
                </div>
                <div class="flex justify-end mt-8">
                    <button type="button" onclick="nextStep()" class="px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Next</button>
                </div>
            </div>

            <!-- Section 2: Proposed Company Information -->
            <div class="form-section" data-section="1">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Section 2: Proposed Company Information</h2>
                <div class="mb-5">
                    <label for="companyName" class="block text-gray-700 text-sm font-medium mb-2">Proposed Legal Name of the Company (including desired entity designator, e.g., Inc., LLC, Corp.):</label>
                    <input type="text" id="companyName" name="companyName" class="focus:ring-2" required>
                    <p class="text-xs text-gray-500 mt-1">Example: "Acme Solutions LLC" or "Global Innovations, Inc."</p>
                </div>
                <div class="mb-5">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Type of Entity to be Formed:</label>
                    <div class="flex flex-col space-y-2">
                        <label class="inline-flex items-center">
                            <input type="radio" name="entityType" value="Corporation (C-Corp)" class="form-radio text-accent-color" required>
                            <span class="ml-2 text-gray-700">Corporation (C-Corp)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="entityType" value="S-Corporation (S-Corp)" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">S-Corporation (S-Corp)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="entityType" value="Limited Liability Company (LLC)" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">Limited Liability Company (LLC)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="entityType" value="Other" class="form-radio text-accent-color" id="entityTypeOtherRadio">
                            <span class="ml-2 text-gray-700">Other (please specify)</span>
                        </label>
                        <input type="text" id="entityTypeOther" name="entityTypeOther" class="mt-2 hidden focus:ring-2" placeholder="Specify entity type">
                    </div>
                </div>
                <div class="mb-5">
                    <label for="stateFormation" class="block text-gray-700 text-sm font-medium mb-2">State of Formation (where the company will be legally registered):</label>
                    <input type="text" id="stateFormation" name="stateFormation" class="focus:ring-2" required>
                </div>
                <div class="mb-5">
                    <label for="businessPurpose" class="block text-gray-700 text-sm font-medium mb-2">Primary Business Purpose/Activity of the Company:</label>
                    <textarea id="businessPurpose" name="businessPurpose" rows="3" class="focus:ring-2" required></textarea>
                    <p class="text-xs text-gray-500 mt-1">Please provide a brief description of what the company will do.</p>
                </div>
                <div class="mb-5">
                    <label for="registeredAgent" class="block text-gray-700 text-sm font-medium mb-2">Desired Registered Agent and Registered Office Address (if known and different from your primary business address):</label>
                    <textarea id="registeredAgent" name="registeredAgent" rows="2" class="focus:ring-2"></textarea>
                    <p class="text-xs text-gray-500 mt-1">If you need us to provide this service, please indicate "Firm to provide."</p>
                </div>
                <div class="mb-5">
                    <label for="businessAddress" class="block text-gray-700 text-sm font-medium mb-2">Primary Business Street Address (where the company will primarily operate):</label>
                    <textarea id="businessAddress" name="businessAddress" rows="2" class="focus:ring-2" required></textarea>
                    <p class="text-xs text-gray-500 mt-1">Street Address, City, State, Zip Code</p>
                </div>
                <div class="mb-5">
                    <label for="fiscalYearEnd" class="block text-gray-700 text-sm font-medium mb-2">Company's Fiscal Year End (e.g., December 31, June 30):</label>
                    <input type="text" id="fiscalYearEnd" name="fiscalYearEnd" class="focus:ring-2" required>
                    <p class="text-xs text-gray-500 mt-1">Most common is December 31.</p>
                </div>
                <div class="flex justify-between mt-8">
                    <button type="button" onclick="prevStep()" class="btn-secondary px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Previous</button>
                    <button type="button" onclick="nextStep()" class="px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Next</button>
                </div>
            </div>

            <!-- Section 3: Ownership Information -->
            <div class="form-section" data-section="2">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Section 3: Ownership Information</h2>
                <p class="mb-6 text-gray-600">Please provide information for all owners. Use the "Add Another Owner" button if needed.</p>
                <div id="ownersContainer">
                    <!-- Owner 1 will be dynamically added here by default -->
                </div>
                <button type="button" onclick="addOwnerSection()" class="btn-secondary mt-4 px-4 py-2 rounded-lg text-sm">Add Another Owner</button>
                <div class="flex justify-between mt-8">
                    <button type="button" onclick="prevStep()" class="btn-secondary px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Previous</button>
                    <button type="button" onclick="nextStep()" class="px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Next</button>
                </div>
            </div>

            <!-- Section 4: EIN Specific Information -->
            <div class="form-section" data-section="3">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Section 4: EIN Specific Information</h2>
                <div class="mb-5">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Reason for Applying for an EIN:</label>
                    <div class="flex flex-col space-y-2">
                        <label class="inline-flex items-center">
                            <input type="radio" name="einReason" value="Started a new business" class="form-radio text-accent-color" required>
                            <span class="ml-2 text-gray-700">Started a new business</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="einReason" value="Hired employees" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">Hired employees</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="einReason" value="Banking purposes" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">Banking purposes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="einReason" value="Changed type of organization" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">Changed type of organization</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="einReason" value="Other" class="form-radio text-accent-color" id="einReasonOtherRadio">
                            <span class="ml-2 text-gray-700">Other (please specify)</span>
                        </label>
                        <input type="text" id="einReasonOther" name="einReasonOther" class="mt-2 hidden focus:ring-2" placeholder="Specify reason for EIN">
                    </div>
                </div>
                <div class="mb-5">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Responsible Party for the EIN Application:</label>
                    <p class="text-xs text-gray-500 mb-2">This is the individual who has control over, or is responsible for disbursing, the funds of the entity.</p>
                    <div class="flex flex-col space-y-2">
                        <label class="inline-flex items-center">
                            <input type="radio" name="responsibleParty" value="Owner 1" class="form-radio text-accent-color" required>
                            <span class="ml-2 text-gray-700">Owner 1 (as listed above)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="responsibleParty" value="Owner 2" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">Owner 2 (as listed above)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="responsibleParty" value="Other" class="form-radio text-accent-color" id="responsiblePartyOtherRadio">
                            <span class="ml-2 text-gray-700">Other (please specify full name and SSN/ITIN)</span>
                        </label>
                        <textarea id="responsiblePartyOther" name="responsiblePartyOther" rows="2" class="mt-2 hidden focus:ring-2" placeholder="Full Name and SSN/ITIN"></textarea>
                    </div>
                </div>
                <div class="mb-5">
                    <label for="businessStartDate" class="block text-gray-700 text-sm font-medium mb-2">Date Business Started or Acquired:</label>
                    <input type="date" id="businessStartDate" name="businessStartDate" class="focus:ring-2" required>
                    <p class="text-xs text-gray-500 mt-1">This is the date you intend to begin business operations or when the entity was legally formed.</p>
                </div>
                <div class="mb-5">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Does the company anticipate having employees within the next 12 months?</label>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="hasEmployees" value="Yes" class="form-radio text-accent-color" required>
                            <span class="ml-2 text-gray-700">Yes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="hasEmployees" value="No" class="form-radio text-accent-color">
                            <span class="ml-2 text-gray-700">No</span>
                        </label>
                    </div>
                </div>
                <div class="mb-5" id="numEmployeesDiv" style="display: none;">
                    <label for="numEmployees" class="block text-gray-700 text-sm font-medium mb-2">If yes, how many employees do you anticipate hiring?</label>
                    <input type="text" id="numEmployees" name="numEmployees" class="focus:ring-2">
                    <p class="text-xs text-gray-500 mt-1">Please specify number of full-time and part-time employees if known.</p>
                </div>
                <div class="flex justify-between mt-8">
                    <button type="button" onclick="prevStep()" class="btn-secondary px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Previous</button>
                    <button type="button" onclick="nextStep()" class="px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Next</button>
                </div>
            </div>

            <!-- Section 5: Additional Information & Summary -->
            <div class="form-section" data-section="4">
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Section 5: Additional Information & Summary</h2>
                <div class="mb-5">
                    <label for="deadlines" class="block text-gray-700 text-sm font-medium mb-2">Are there any specific deadlines or urgency for the company formation or EIN application?</label>
                    <textarea id="deadlines" name="deadlines" rows="2" class="focus:ring-2"></textarea>
                </div>
                <div class="mb-5">
                    <label for="otherInfo" class="block text-gray-700 text-sm font-medium mb-2">Is there any other information you believe is relevant or important for us to know regarding your company setup?</label>
                    <textarea id="otherInfo" name="otherInfo" rows="3" class="focus:ring-2"></textarea>
                </div>

                <h3 class="text-xl font-semibold mb-4 text-gray-700 mt-8">Review Your Information</h3>
                <div id="summaryContent" class="bg-secondary-bg p-6 rounded-lg border border-border-color">
                    <p class="text-gray-600">Please review the information you have provided below. If anything needs correction, you can go back to previous sections.</p>
                </div>

                <div class="flex justify-between mt-8">
                    <button type="button" onclick="prevStep()" class="btn-secondary px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Previous</button>
                    <button type="submit" class="px-6 py-3 rounded-lg shadow-md hover:shadow-lg">Submit Information</button>
                </div>
            </div>
        </form>

        <!-- Submission Confirmation Modal -->
        <div id="confirmationModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white p-8 rounded-lg shadow-xl max-w-sm w-full text-center">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Thank You!</h3>
                <p class="text-gray-700 mb-6">Your information has been successfully submitted. We will review your responses and be in touch shortly to proceed with your company formation and EIN application.</p>
                <button type="button" onclick="closeModal()" class="px-6 py-3 rounded-lg bg-accent-color text-white hover:bg-accent-hover">Close</button>
            </div>
        </div>

    </div>

    <script>
        let currentStep = 0;
        const formSections = document.querySelectorAll('.form-section');
        const progressDots = document.querySelectorAll('.progress-dot');
        const ownersContainer = document.getElementById('ownersContainer');
        let ownerCount = 0;

        function showStep(step) {
            formSections.forEach((section, index) => {
                section.classList.remove('active');
                if (index === step) {
                    section.classList.add('active');
                }
            });
            updateProgressDots(step);
            if (step === formSections.length - 1) {
                generateSummary();
            }
        }

        function updateProgressDots(step) {
            progressDots.forEach((dot, index) => {
                dot.classList.remove('active', 'completed');
                if (index < step) {
                    dot.classList.add('completed');
                } else if (index === step) {
                    dot.classList.add('active');
                }
            });
        }

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < formSections.length - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function validateCurrentStep() {
            const currentSection = formSections[currentStep];
            const inputs = currentSection.querySelectorAll('input[required], textarea[required], select[required]');
            let allValid = true;

            inputs.forEach(input => {
                if (!input.value.trim()) {
                    allValid = false;
                    input.style.borderColor = 'red';
                } else {
                    input.style.borderColor = '';
                }
            });

            const radioGroups = {};
            currentSection.querySelectorAll('input[type="radio"][required]').forEach(radio => {
                const name = radio.name;
                if (!radioGroups[name]) {
                    radioGroups[name] = false;
                }
                if (radio.checked) {
                    radioGroups[name] = true;
                }
            });

            for (const groupName in radioGroups) {
                if (!radioGroups[groupName]) {
                    allValid = false;
                    // Visually indicate required radio group if possible, though harder than text inputs
                }
            }

            if (!allValid) {
                // In a real app, you'd show a user-friendly error message
                // For this example, just preventing navigation is enough
                return false;
            }

            // Specific validation for "Other" text fields
            const entityTypeOtherRadio = document.getElementById('entityTypeOtherRadio');
            const entityTypeOther = document.getElementById('entityTypeOther');
            if (entityTypeOtherRadio && entityTypeOtherRadio.checked && !entityTypeOther.value.trim()) {
                entityTypeOther.style.borderColor = 'red';
                allValid = false;
            } else if (entityTypeOther) {
                entityTypeOther.style.borderColor = '';
            }

            const einReasonOtherRadio = document.getElementById('einReasonOtherRadio');
            const einReasonOther = document.getElementById('einReasonOther');
            if (einReasonOtherRadio && einReasonOtherRadio.checked && !einReasonOther.value.trim()) {
                einReasonOther.style.borderColor = 'red';
                allValid = false;
            } else if (einReasonOther) {
                einReasonOther.style.borderColor = '';
            }

            const responsiblePartyOtherRadio = document.getElementById('responsiblePartyOtherRadio');
            const responsiblePartyOther = document.getElementById('responsiblePartyOther');
            if (responsiblePartyOtherRadio && responsiblePartyOtherRadio.checked && !responsiblePartyOther.value.trim()) {
                responsiblePartyOther.style.borderColor = 'red';
                allValid = false;
            } else if (responsiblePartyOther) {
                responsiblePartyOther.style.borderColor = '';
            }

            // Validate employee count if 'Yes' is selected
            const hasEmployeesRadios = document.querySelectorAll('input[name="hasEmployees"]');
            let hasEmployeesValue = '';
            hasEmployeesRadios.forEach(radio => {
                if (radio.checked) {
                    hasEmployeesValue = radio.value;
                }
            });
            const numEmployeesInput = document.getElementById('numEmployees');
            if (hasEmployeesValue === 'Yes' && !numEmployeesInput.value.trim()) {
                numEmployeesInput.style.borderColor = 'red';
                allValid = false;
            } else if (numEmployeesInput) {
                numEmployeesInput.style.borderColor = '';
            }


            // Validate owner sections
            if (currentStep === 2) { // Ownership section
                const ownerSections = ownersContainer.querySelectorAll('.owner-section');
                if (ownerSections.length === 0) {
                    allValid = false; // At least one owner required
                } else {
                    ownerSections.forEach((section, index) => {
                        const ownerInputs = section.querySelectorAll('input[required], textarea[required]');
                        ownerInputs.forEach(input => {
                            if (!input.value.trim()) {
                                allValid = false;
                                input.style.borderColor = 'red';
                            } else {
                                input.style.borderColor = '';
                            }
                        });
                    });
                }
            }

            return allValid;
        }

        function addOwnerSection() {
            ownerCount++;
            const ownerDiv = document.createElement('div');
            ownerDiv.classList.add('owner-section', 'mb-6');
            ownerDiv.innerHTML = `
                <h3 class="text-xl font-semibold mb-4 text-gray-700">Owner ${ownerCount}</h3>
                <div class="mb-4">
                    <label for="owner${ownerCount}Name" class="block text-gray-700 text-sm font-medium mb-2">Full Legal Name of Owner ${ownerCount}:</label>
                    <input type="text" id="owner${ownerCount}Name" name="owner${ownerCount}Name" class="focus:ring-2" required>
                </div>
                <div class="mb-4">
                    <label for="owner${ownerCount}Title" class="block text-gray-700 text-sm font-medium mb-2">Owner ${ownerCount}'s Title/Role:</label>
                    <input type="text" id="owner${ownerCount}Title" name="owner${ownerCount}Title" class="focus:ring-2" required>
                    <p class="text-xs text-gray-500 mt-1">e.g., Shareholder, Member, President, CEO, Manager</p>
                </div>
                <div class="mb-4">
                    <label for="owner${ownerCount}Ownership" class="block text-gray-700 text-sm font-medium mb-2">Owner ${ownerCount}'s Percentage of Ownership / Number of Shares:</label>
                    <input type="text" id="owner${ownerCount}Ownership" name="owner${ownerCount}Ownership" class="focus:ring-2" required>
                </div>
                <div class="mb-4">
                    <label for="owner${ownerCount}Address" class="block text-gray-700 text-sm font-medium mb-2">Owner ${ownerCount}'s Street Address:</label>
                    <textarea id="owner${ownerCount}Address" name="owner${ownerCount}Address" rows="2" class="focus:ring-2" required></textarea>
                    <p class="text-xs text-gray-500 mt-1">Street Address, City, State, Zip Code</p>
                </div>
                <div class="mb-4">
                    <label for="owner${ownerCount}SSN" class="block text-gray-700 text-sm font-medium mb-2">Owner ${ownerCount}'s Social Security Number (SSN) or Individual Taxpayer Identification Number (ITIN):</label>
                    <input type="text" id="owner${ownerCount}SSN" name="owner${ownerCount}SSN" class="focus:ring-2" required>
                    <p class="text-xs text-gray-500 mt-1">This is required for EIN application.</p>
                </div>
                <button type="button" onclick="removeOwnerSection(this)" class="btn-secondary text-sm px-3 py-1 rounded-md mt-2">Remove Owner</button>
            `;
            ownersContainer.appendChild(ownerDiv);
        }

        function removeOwnerSection(button) {
            button.closest('.owner-section').remove();
            // Re-index owner titles if needed, or just let them be
        }

        function generateSummary() {
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = `
                <p class="text-gray-600 mb-6">Please review the information you have provided below. If anything needs correction, you can go back to previous sections.</p>
            `;

            const formData = new FormData(document.getElementById('clientForm'));
            const data = {};

            // Collect all form data
            for (let [key, value] of formData.entries()) {
                if (key.startsWith('owner')) {
                    const match = key.match(/owner(\d+)(.*)/);
                    if (match) {
                        const ownerIndex = parseInt(match[1]) - 1;
                        const fieldName = match[2];
                        if (!data.owners) {
                            data.owners = [];
                        }
                        if (!data.owners[ownerIndex]) {
                            data.owners[ownerIndex] = {};
                        }
                        data.owners[ownerIndex][fieldName] = value;
                    }
                } else {
                    data[key] = value;
                }
            }

            // Display Client Contact Info
            summaryContent.innerHTML += `<h4 class="text-lg font-semibold mb-2 text-gray-800">Client Contact Information</h4>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Your Full Name:</strong> <span>${data.clientName || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Your Email Address:</strong> <span>${data.clientEmail || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Your Phone Number:</strong> <span>${data.clientPhone || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<hr class="my-4 border-gray-300">`;

            // Display Proposed Company Info
            summaryContent.innerHTML += `<h4 class="text-lg font-semibold mb-2 text-gray-800">Proposed Company Information</h4>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Proposed Legal Name of the Company:</strong> <span>${data.companyName || 'N/A'}</span></div>`;
            let entityType = data.entityType;
            if (entityType === 'Other' && data.entityTypeOther) {
                entityType += ` (${data.entityTypeOther})`;
            }
            summaryContent.innerHTML += `<div class="summary-item"><strong>Type of Entity to be Formed:</strong> <span>${entityType || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>State of Formation:</strong> <span>${data.stateFormation || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Primary Business Purpose/Activity:</strong> <span>${data.businessPurpose || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Desired Registered Agent and Registered Office Address:</strong> <span>${data.registeredAgent || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Primary Business Street Address:</strong> <span>${data.businessAddress || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Company's Fiscal Year End:</strong> <span>${data.fiscalYearEnd || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<hr class="my-4 border-gray-300">`;

            // Display Ownership Information
            summaryContent.innerHTML += `<h4 class="text-lg font-semibold mb-2 text-gray-800">Ownership Information</h4>`;
            if (data.owners && data.owners.length > 0) {
                data.owners.forEach((owner, index) => {
                    summaryContent.innerHTML += `<div class="mb-4">`;
                    summaryContent.innerHTML += `<h5 class="font-medium text-gray-700">Owner ${index + 1}:</h5>`;
                    summaryContent.innerHTML += `<div class="summary-item"><strong>Full Legal Name:</strong> <span>${owner.Name || 'N/A'}</span></div>`;
                    summaryContent.innerHTML += `<div class="summary-item"><strong>Title/Role:</strong> <span>${owner.Title || 'N/A'}</span></div>`;
                    summaryContent.innerHTML += `<div class="summary-item"><strong>Percentage of Ownership / Shares:</strong> <span>${owner.Ownership || 'N/A'}</span></div>`;
                    summaryContent.innerHTML += `<div class="summary-item"><strong>Street Address:</strong> <span>${owner.Address || 'N/A'}</span></div>`;
                    summaryContent.innerHTML += `<div class="summary-item"><strong>SSN/ITIN:</strong> <span>${owner.SSN || 'N/A'}</span></div>`;
                    summaryContent.innerHTML += `</div>`;
                });
            } else {
                summaryContent.innerHTML += `<p class="text-gray-600">No owner information provided.</p>`;
            }
            summaryContent.innerHTML += `<hr class="my-4 border-gray-300">`;

            // Display EIN Specific Information
            summaryContent.innerHTML += `<h4 class="text-lg font-semibold mb-2 text-gray-800">EIN Specific Information</h4>`;
            let einReason = data.einReason;
            if (einReason === 'Other' && data.einReasonOther) {
                einReason += ` (${data.einReasonOther})`;
            }
            summaryContent.innerHTML += `<div class="summary-item"><strong>Reason for Applying for an EIN:</strong> <span>${einReason || 'N/A'}</span></div>`;
            let responsibleParty = data.responsibleParty;
            if (responsibleParty === 'Other' && data.responsiblePartyOther) {
                responsibleParty += ` (${data.responsiblePartyOther})`;
            }
            summaryContent.innerHTML += `<div class="summary-item"><strong>Responsible Party for the EIN Application:</strong> <span>${responsibleParty || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Date Business Started or Acquired:</strong> <span>${data.businessStartDate || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Anticipate Employees within 12 months?:</strong> <span>${data.hasEmployees || 'N/A'}</span></div>`;
            if (data.hasEmployees === 'Yes') {
                summaryContent.innerHTML += `<div class="summary-item"><strong>Number of Employees Anticipated:</strong> <span>${data.numEmployees || 'N/A'}</span></div>`;
            }
            summaryContent.innerHTML += `<hr class="my-4 border-gray-300">`;

            // Display Additional Information
            summaryContent.innerHTML += `<h4 class="text-lg font-semibold mb-2 text-gray-800">Additional Information</h4>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Specific deadlines or urgency:</strong> <span>${data.deadlines || 'N/A'}</span></div>`;
            summaryContent.innerHTML += `<div class="summary-item"><strong>Other relevant information:</strong> <span>${data.otherInfo || 'N/A'}</span></div>`;
        }


        document.getElementById('clientForm').addEventListener('submit', function(event) {
            event.preventDefault();
            if (validateCurrentStep()) {
                document.getElementById('confirmationModal').classList.remove('hidden');
                // In a real application, you would send this data to a server here.
                // console.log('Form Submitted!', Object.fromEntries(new FormData(this)));
            }
        });

        function closeModal() {
            document.getElementById('confirmationModal').classList.add('hidden');
            // Optionally reset form or redirect
            document.getElementById('clientForm').reset();
            currentStep = 0;
            ownerCount = 0;
            ownersContainer.innerHTML = ''; // Clear dynamically added owners
            addOwnerSection(); // Add back the first owner section
            showStep(currentStep);
        }

        // Handle "Other" radio button visibility
        document.addEventListener('DOMContentLoaded', () => {
            const entityTypeOtherRadio = document.getElementById('entityTypeOtherRadio');
            const entityTypeOther = document.getElementById('entityTypeOther');
            if (entityTypeOtherRadio) {
                entityTypeOtherRadio.addEventListener('change', () => {
                    entityTypeOther.classList.toggle('hidden', !entityTypeOtherRadio.checked);
                    if (entityTypeOtherRadio.checked) entityTypeOther.setAttribute('required', 'true');
                    else entityTypeOther.removeAttribute('required');
                });
            }
            document.querySelectorAll('input[name="entityType"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value !== 'Other' && entityTypeOther) {
                        entityTypeOther.classList.add('hidden');
                        entityTypeOther.removeAttribute('required');
                    }
                });
            });

            const einReasonOtherRadio = document.getElementById('einReasonOtherRadio');
            const einReasonOther = document.getElementById('einReasonOther');
            if (einReasonOtherRadio) {
                einReasonOtherRadio.addEventListener('change', () => {
                    einReasonOther.classList.toggle('hidden', !einReasonOtherRadio.checked);
                    if (einReasonOtherRadio.checked) einReasonOther.setAttribute('required', 'true');
                    else einReasonOther.removeAttribute('required');
                });
            }
            document.querySelectorAll('input[name="einReason"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value !== 'Other' && einReasonOther) {
                        einReasonOther.classList.add('hidden');
                        einReasonOther.removeAttribute('required');
                    }
                });
            });

            const responsiblePartyOtherRadio = document.getElementById('responsiblePartyOtherRadio');
            const responsiblePartyOther = document.getElementById('responsiblePartyOther');
            if (responsiblePartyOtherRadio) {
                responsiblePartyOtherRadio.addEventListener('change', () => {
                    responsiblePartyOther.classList.toggle('hidden', !responsiblePartyOtherRadio.checked);
                    if (responsiblePartyOtherRadio.checked) responsiblePartyOther.setAttribute('required', 'true');
                    else responsiblePartyOther.removeAttribute('required');
                });
            }
            document.querySelectorAll('input[name="responsibleParty"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value !== 'Other' && responsiblePartyOther) {
                        responsiblePartyOther.classList.add('hidden');
                        responsiblePartyOther.removeAttribute('required');
                    }
                });
            });


            // Handle employee count visibility
            const hasEmployeesRadios = document.querySelectorAll('input[name="hasEmployees"]');
            const numEmployeesDiv = document.getElementById('numEmployeesDiv');
            const numEmployeesInput = document.getElementById('numEmployees');

            hasEmployeesRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value === 'Yes') {
                        numEmployeesDiv.style.display = 'block';
                        numEmployeesInput.setAttribute('required', 'true');
                    } else {
                        numEmployeesDiv.style.display = 'none';
                        numEmployeesInput.removeAttribute('required');
                    }
                });
            });

            addOwnerSection(); // Add the first owner section on load
            showStep(currentStep); // Initialize the first step
        });
    </script>
</body>
</html>
